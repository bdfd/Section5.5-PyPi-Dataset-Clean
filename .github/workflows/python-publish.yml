# .github/workflows/ci-cd.yml

on:
 release:
  types: [created]

jobs:
 pypi-publish:
  name: Upload release to PyPI
  runs-on: ubuntu-latest
  environment:
   name: pypi
   url: https://pypi.org/p/execdata
  permissions:
   id-token: write # IMPORTANT: this permission is mandatory for trusted publishing
  steps:
   # retrieve your distributions here
   - name: Publish a Python distribution to PyPI
     uses: pypa/gh-action-pypi-publish@release/v1
     with:
      password: ${{ secrets.PYPI_API_TOKEN }}
